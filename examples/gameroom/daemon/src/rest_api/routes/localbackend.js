import { submit_scabbard_payload } from "./submit.rs";
import { fetch_active_gamerooms } from "./gameroom.rs";
import { signPayload } from "examples/gameroom/test_backend/utils/crypto.js";

const alpha = {
    "publicKey": "02df776e65a3e6d50df51985b3de5d36e7d05d5beb9fa613186d93556cba77770e",
    "privateKey": "0d85c37df86623c4517a5a3efdc6e0f03df669be2b920c7b67c9feb64a4f195f"
}

const beta = {
    "publicKey": "028737383c7ca45c2b2f6c39a28c069d33b34d810fd5c4c9350580c2dfff20610d",
    "privateKey": "865b56a22b9605e8f33670db00998ecd3393b2cfd514cb44d40e0fafd8e39614"
}

const delta = {
    "publicKey": "0366fedac49c40ff282bc6a4be95cd2b1bfea395889adbaba56271e22c24cc2673",
    "privateKey": "2c626088afc5c337e823c85b599a3236c64aa6b24f4c2a6989a8d65296cccae8"
}


async function submitPayload(payload, port) {
    await http('POST', '/submit', payload, (request) => {
      request.setRequestHeader('Content-Type', 'application/octet-stream');
    }).catch((err) => {
      console.log(err)
    }, port)
  }

function fetchgamerooms(node_id, service_id) {
    const fetchnode = fetch_active_gamerooms(circuit_id, node_id);
    const circuit_id = "ldyXA-ohSh1";

    return submit_scabbard_payload(circuit_id, service_id);
    
}

const payload_bytes_alpha = [
    10,
    83,
    8,
    2,
    26,
    64,
    172,
    124,
    187,
    135,
    83,
    217,
    110,
    38,
    218,
    82,
    196,
    107,
    252,
    73,
    7,
    15,
    55,
    159,
    15,
    14,
    43,
    160,
    87,
    127,
    247,
    104,
    115,
    4,
    201,
    163,
    116,
    19,
    40,
    100,
    191,
    111,
    149,
    67,
    65,
    3,
    181,
    127,
    3,
    248,
    143,
    129,
    214,
    13,
    29,
    83,
    176,
    245,
    36,
    28,
    97,
    36,
    192,
    222,
    149,
    253,
    146,
    207,
    247,
    104,
    34,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    164,
    4,
    10,
    161,
    4,
    10,
    11,
    71,
    106,
    87,
    99,
    116,
    45,
    83,
    85,
    102,
    57,
    57,
    18,
    144,
    1,
    10,
    4,
    97,
    48,
    48,
    48,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    49,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    18,
    144,
    1,
    10,
    4,
    97,
    48,
    48,
    49,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    48,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    26,
    48,
    10,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    18,
    31,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    97,
    99,
    109,
    101,
    58,
    56,
    48,
    52,
    52,
    26,
    48,
    10,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    18,
    31,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    97,
    99,
    109,
    101,
    58,
    56,
    48,
    52,
    52,
    32,
    1,
    40,
    1,
    48,
    1,
    56,
    1,
    66,
    8,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    74,
    118,
    123,
    34,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    95,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    34,
    58,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    44,
    34,
    97,
    108,
    105,
    97,
    115,
    34,
    58,
    34,
    116,
    101,
    115,
    116,
    32,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    34,
    125
];

const payload_bytes_beta = [
    10,
    83,
    8,
    2,
    26,
    64,
    179,
    152,
    220,
    44,
    87,
    254,
    64,
    98,
    11,
    83,
    89,
    34,
    92,
    20,
    223,
    255,
    116,
    113,
    48,
    92,
    58,
    75,
    224,
    87,
    171,
    15,
    163,
    113,
    75,
    100,
    112,
    1,
    150,
    199,
    117,
    177,
    160,
    65,
    218,
    251,
    137,
    176,
    103,
    66,
    249,
    216,
    231,
    161,
    35,
    204,
    79,
    243,
    139,
    85,
    9,
    20,
    29,
    56,
    49,
    173,
    124,
    85,
    210,
    195,
    34,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    167,
    4,
    10,
    164,
    4,
    10,
    11,
    106,
    109,
    86,
    67,
    66,
    45,
    118,
    105,
    86,
    75,
    107,
    18,
    144,
    1,
    10,
    4,
    97,
    48,
    48,
    48,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    49,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    18,
    145,
    1,
    10,
    4,
    97,
    48,
    48,
    49,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    14,
    98,
    117,
    98,
    98,
    97,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    48,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    26,
    50,
    10,
    14,
    98,
    117,
    98,
    98,
    97,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    18,
    32,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    98,
    117,
    98,
    98,
    97,
    58,
    56,
    48,
    52,
    52,
    26,
    48,
    10,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    18,
    31,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    97,
    99,
    109,
    101,
    58,
    56,
    48,
    52,
    52,
    32,
    1,
    40,
    1,
    48,
    1,
    56,
    1,
    66,
    8,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    74,
    118,
    123,
    34,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    95,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    34,
    58,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    44,
    34,
    97,
    108,
    105,
    97,
    115,
    34,
    58,
    34,
    116,
    101,
    115,
    116,
    32,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    34,
    125
];

const payload_bytes_delta = [
    10,
    83,
    8,
    2,
    26,
    64,
    33,
    227,
    221,
    110,
    152,
    102,
    24,
    227,
    27,
    243,
    83,
    195,
    203,
    108,
    180,
    49,
    137,
    18,
    167,
    137,
    41,
    124,
    189,
    131,
    2,
    102,
    88,
    138,
    35,
    184,
    31,
    34,
    137,
    16,
    147,
    183,
    137,
    75,
    121,
    22,
    236,
    190,
    80,
    99,
    86,
    71,
    216,
    140,
    145,
    61,
    11,
    51,
    75,
    223,
    58,
    68,
    106,
    238,
    210,
    110,
    191,
    197,
    245,
    226,
    34,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    149,
    4,
    10,
    146,
    4,
    10,
    11,
    57,
    103,
    49,
    98,
    119,
    45,
    86,
    53,
    110,
    90,
    83,
    18,
    144,
    1,
    10,
    4,
    97,
    48,
    48,
    48,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    49,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    18,
    136,
    1,
    10,
    4,
    97,
    48,
    48,
    49,
    18,
    8,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    26,
    5,
    100,
    101,
    108,
    116,
    97,
    34,
    25,
    10,
    13,
    112,
    101,
    101,
    114,
    95,
    115,
    101,
    114,
    118,
    105,
    99,
    101,
    115,
    18,
    8,
    91,
    34,
    97,
    48,
    48,
    48,
    34,
    93,
    34,
    84,
    10,
    10,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    18,
    70,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    26,
    41,
    10,
    5,
    100,
    101,
    108,
    116,
    97,
    18,
    32,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    100,
    101,
    108,
    116,
    97,
    58,
    56,
    48,
    52,
    52,
    26,
    48,
    10,
    13,
    97,
    99,
    109,
    101,
    45,
    110,
    111,
    100,
    101,
    45,
    48,
    48,
    48,
    18,
    31,
    116,
    99,
    112,
    115,
    58,
    47,
    47,
    115,
    112,
    108,
    105,
    110,
    116,
    101,
    114,
    100,
    45,
    110,
    111,
    100,
    101,
    45,
    97,
    99,
    109,
    101,
    58,
    56,
    48,
    52,
    52,
    32,
    1,
    40,
    1,
    48,
    1,
    56,
    1,
    66,
    8,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    74,
    118,
    123,
    34,
    115,
    99,
    97,
    98,
    98,
    97,
    114,
    100,
    95,
    97,
    100,
    109,
    105,
    110,
    95,
    107,
    101,
    121,
    115,
    34,
    58,
    91,
    34,
    48,
    51,
    99,
    97,
    57,
    55,
    98,
    57,
    57,
    50,
    98,
    102,
    49,
    57,
    55,
    53,
    100,
    97,
    53,
    48,
    98,
    99,
    54,
    55,
    100,
    49,
    101,
    52,
    98,
    101,
    50,
    100,
    102,
    99,
    101,
    102,
    51,
    49,
    99,
    99,
    56,
    98,
    55,
    55,
    52,
    49,
    98,
    100,
    57,
    56,
    101,
    54,
    52,
    102,
    49,
    56,
    97,
    50,
    57,
    50,
    52,
    49,
    54,
    54,
    99,
    48,
    34,
    93,
    44,
    34,
    97,
    108,
    105,
    97,
    115,
    34,
    58,
    34,
    116,
    101,
    115,
    116,
    32,
    103,
    97,
    109,
    101,
    114,
    111,
    111,
    109,
    34,
    125
];


submitPayload(signPayload(payload_bytes_alpha, alpha.privateKey)).then((data) => console.log("okalpha"))
submitPayload(signPayload(payload_bytes_beta, beta.privateKey)).then((data) => console.log("okbeta"))
submitPayload(signPayload(payload_bytes_delta, delta.privateKey)).then((data) => console.log("okdelta"))

fetchgamerooms("acme-node-000", gsAA);
fetchgamerooms("bubba-node-000", gsBB);
fetchgamerooms("delta", gsCC);